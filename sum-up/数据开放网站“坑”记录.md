# 数据开放网站“坑”记录

---

1. nginx进行代理时再使用csrfguard会出现代理不正常
> 解决方法：在stackoverflow上的[这里](http://stackoverflow.com/questions/35691799/jasperserver-proxy-csrf-error )

2. 实现nginx动态代理多个web server（tomcat），并附带session共享
> 解决方案：核心思路将session存储在redis中。实现思路在[这里](http://lanjingling.github.io/2015/12/15/tomcat-redis-session/)。还有一个工具包在[这里](https://github.com/marlin5555/study/blob/master/tool/session%E5%85%B1%E4%BA%AB.zip)。

3. csrfguard的使用
> 解决方案：[官网](https://www.owasp.org/index.php/CSRFGuard_3_Token_Injection)

4. Kaptcha验证码的使用
> 解决方案：配置[说明文档](http://www.open-open.com/lib/view/open1395238908947.html)，解决google jar包不能下载在[这里](https://github.com/axet/kaptcha)

5. spring中使用javax mail发送邮件
> 解决方案：这里有[教程](http://blog.csdn.net/adeyi/article/details/19421951)

6. nginx在进行负载均衡时使用的策略
> 解决方案：在[这里](http://blog.chinaunix.net/uid-20662363-id-3049712.html)是负载均衡配置方式，考虑到手动指定down机这一行为几乎很难第一时间进行，因此应当充分利用`max_fails`和`fail_timeout`这两个参数实现动态链接分配。有关nginx的更详细信息参考[这里](http://blog.chinaunix.net/u3/107231/showart_2138493.html)，但这个链接已经失效，想要看到还需要借助[archive网站](http://www.archive.org)，当然这个神奇的网站在国内是看不到的，接下来的翻墙问题请自行解决（*这个是无耻的翻墙广告*）
